angular.module("formalizer-tpls",["templates/formalizer-checkbox-list.tpl.html","templates/formalizer-checkbox.tpl.html","templates/formalizer-columns.tpl.html","templates/formalizer-error-list.tpl.html","templates/formalizer-form-1.2.tpl.html","templates/formalizer-form-1.3.tpl.html","templates/formalizer-input.tpl.html","templates/formalizer-radio-list.tpl.html","templates/formalizer-raw.tpl.html","templates/formalizer-richtext.tpl.html","templates/formalizer-select.tpl.html","templates/formalizer-slider.tpl.html","templates/formalizer-submit.tpl.html","templates/formalizer-textarea.tpl.html","templates/formalizer-typeahead.tpl.html","templates/formalizer.fields.tpl.html"]),angular.module("templates/formalizer-checkbox-list.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-checkbox-list.tpl.html",'<div class="{{container.class}}" ng-class="{ \'has-error\' : (%scope-form-name%[\'{{element.attrs.name}}\'].$invalid == true) }" ng-show="$field.formalizer.visible">\n  <label class="{{label.class}}" ng-bind="$field.label"></label>\n  <div class="{{element.container.class}}">\n    <div ng-show="{{scope_name}}.options.select_all">\n      <label for="{{element.attrs.name}}-select-all">\n        <input name="{{element.attrs.name}}-select-all" id="{{element.attrs.id}}-select-all" value="true" ng-checked="{{element.attrs[\'checklist-model\']}}.length == $field[\'$$\'].source.length" type="checkbox" ng-model="{{options.chkall_model}}" ng-change="{{options.scope_name}}.options.check_all($event)" />\n        Select All\n      </label>\n    </div>\n\n    <div class="{{element.wrap.class}}" ng-repeat="checkbox_data in $field.formalizer.source">\n      <label for="{{element.attrs.name}}-\\{\\{$index\\}\\}">\n        <input name="{{element.attrs.name}}-\\{\\{$index\\}\\}" id="{{element.attrs.id}}-\\{\\{$index\\}\\}" %element-attributes%>\n        \\{\\{checkbox_data[\'{{source_display}}\']\\}\\}\n      </label>\n    </div>\n\n    <div class="help-block" ng-bind="$field.help"></div>\n\n  </div>\n</div>\n')}]),angular.module("templates/formalizer-checkbox.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-checkbox.tpl.html",'<div class="{{container.class}}" ng-class="{ \'has-error\' : (%scope-form-name%[\'{{element.attrs.name}}\'].$invalid == true) }" ng-show="$field.formalizer.visible">\n  <div class="{{element.container.class}}">\n    <label for="{{element.attrs.name}}" class="{{label.class}}">\n      <input %element-attributes% /><span ng-bind="$field.label"></span>\n    </label>\n\n    <div class="help-block" ng-bind="$field.help"></div>\n\n    %element-error-list%\n  </div>\n</div>\n')}]),angular.module("templates/formalizer-columns.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-columns.tpl.html",'<div class="row">\n    <div ng-repeat="col in columns" class="col-xs-{{col.cols}} col-sm-{{col.cols}} col-md-{{col.cols}} col-lg-{{col.cols}}">\n        <div ng-formalizer-field="col"></div>\n    </div>\n</div>')}]),angular.module("templates/formalizer-error-list.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-error-list.tpl.html","<ul class=\"form-error-list help-block\">\n  <li ng-show=\"$formalizer.$attemps > 0 && %scope-form-name%['{{element.attrs.name}}'].$error.required\">{{messages.required || 'Field is required'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error.min\">{{messages.min || 'Field minimum is \\{\\{element.attrs[\\'ng-min\\']\\}\\}'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error.max\">{{messages.max || 'Field maximum is \\{\\{element.attrs[\\'ng-max\\']\\}\\}'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error.minlength\">{{messages.minlength || 'Field is required to be at least \\{\\{element.attrs[\\'ng-minlength\\']\\}\\} characters'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error.maxlength\">{{messages.maxlength || 'Field cannot be longer than \\{\\{element.attrs[\\'ng-maxlength\\']\\}\\} characters'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error.number\">{{messages.number || 'Field is an invalid number'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error.email\">{{messages.email || 'Field is an invalid email'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error.url\">{{messages.url || 'Field is an invalid URL'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error.blacklist\">{{messages.blacklist || 'Field value is blacklisted'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error['equal-to']\">{{messages['equal-to'] || 'Field must be equal to: X'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error['only-alpha']\">{{messages['only-alpha'] || 'Field must contains only letters'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error['only-iso']\">{{messages['only-iso'] || 'Valid characters are: A-Z, a-z, 0-9'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error['one-upper']\">{{messages['one-upper'] || 'At least one uppercase'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error['one-lower']\">{{messages['one-lower'] || 'At least one lowercase'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error['one-number']\">{{messages['one-number'] || 'At least one number'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error['one-alpha']\">{{messages['one-alpha'] || 'At least one letter'}}</li>\n  <li ng-show=\"%scope-form-name%['{{element.attrs.name}}'].$error['server-validation']\">{{messages['server-validation'] || 'Server validation fails'}}</li>\n</ul>")}]),angular.module("templates/formalizer-form-1.2.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-form-1.2.tpl.html",'<form\n    role="form"\n    ng-submit="$formalizer.submit()"\n    ng-class="{\'form-horizontal\': $formalizer.horizontal, \'form-vertical\': $formalizer.vertical, \'form-inline\': $formalizer.inline}"\n    name="{{$formalizer.name}}"\n    ng-formalizer-form-attach="$formalizer.name"\n    novalidate>\n  <fieldset>\n    <legend ng-if="$formalizer.legend">{{$formalizer.legend}}</legend>\n    <div class="fieldset-contents"></div>\n\n    <div ng-if="$formalizer.model">\n      <div ng-init="field.fields = $formalizer.fields"></div>\n      <div ng-include="\'templates/formalizer.fields.tpl.html\'"></div>\n    </div>\n\n  </fieldset>\n\n</form>\n')}]),angular.module("templates/formalizer-form-1.3.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-form-1.3.tpl.html",'<form\n    role="form"\n    ng-submit="$formalizer.submit()"\n    ng-class="{\'form-horizontal\': $formalizer.horizontal, \'form-vertical\': $formalizer.vertical, \'form-inline\': $formalizer.inline}"\n    name="$parent.{{$formalizer.name}}"\n    ng-formalizer-form-attach="$formalizer.name"\n    novalidate>\n  <fieldset>\n    <legend ng-if="$formalizer.legend">{{$formalizer.legend}}</legend>\n    <div class="fieldset-contents"></div>\n\n    <div ng-if="$formalizer.model">\n      <div ng-init="field.fields = $formalizer.fields"></div>\n      <div ng-include="\'templates/formalizer.fields.tpl.html\'"></div>\n    </div>\n\n    </div>\n  </fieldset>\n\n</form>\n')}]),angular.module("templates/formalizer-input.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-input.tpl.html",'<div class="{{container.class}}" ng-class="{ \'has-error\' : (%scope-form-name%[\'{{element.attrs.name}}\'].$invalid == true) }" ng-show="$field.formalizer.visible">\n  <label for="{{element.attrs.name}}" class="{{label.class}}" ng-bind="$field.label"></label>\n  <div class="{{element.container.class}}">\n    <div class="{{element.wrap.class}}">\n        {{element.left}}\n        <input %element-attributes% />\n        {{element.right}}\n    </div>\n\n    <div class="help-block" ng-bind="$field.help"></div>\n\n    %element-error-list%\n\n  </div>\n</div>\n')}]),angular.module("templates/formalizer-radio-list.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-radio-list.tpl.html",'<div class="{{container.class}}" ng-class="{ \'has-error\' : (%scope-form-name%[\'{{element.attrs.name}}\'].$invalid == true) }" ng-show="$field.formalizer.visible">\n  <label class="{{label.class}}" ng-bind="$field.label"></label>\n  <div class="{{element.container.class}}">\n    <div class="{{element.wrap.class}}" ng-repeat="radio_data in $field.formalizer.source">\n      <label for="{{element.attrs.name}}-\\{\\{$index\\}\\}">\n        <input name="{{element.attrs.name}}" id="{{element.attrs.id}}-\\{\\{$index\\}\\}" value="\\{\\{radio_data{{source_model}}\\}\\}" %element-attributes%>\n        \\{\\{radio_data[\'{{source_display}}\']\\}\\}\n      </label>\n    </div>\n\n    <div class="help-block" ng-bind="$field.help"></div>\n\n    %element-error-list%\n\n  </div>\n</div>\n')}]),angular.module("templates/formalizer-raw.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-raw.tpl.html",'<div ng-formalizer-attach="" ng-show="$field.formalizer.visible">\n</div>\n')}]),angular.module("templates/formalizer-richtext.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-richtext.tpl.html",'<div class="{{container.class}}" ng-class="{ \'has-error\' : (%scope-form-name%[\'{{element.attrs.name}}\'].$invalid == true) }" ng-show="$field.formalizer.visible">\n  <label for="{{element.attrs.name}}" class="{{label.class}}" ng-bind="$field.label"></label>\n  <div class="{{element.container.class}}">\n    <div class="{{element.wrap.class}}">\n        <div text-angular %element-attributes%></div>\n    </div>\n\n    <div class="help-block" ng-bind="$field.help"></div>\n\n    %element-error-list%\n\n  </div>\n</div>\n')}]),angular.module("templates/formalizer-select.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-select.tpl.html",'<div class="{{container.class}}" ng-class="{ \'has-error\' : (%scope-form-name%[\'{{element.attrs.name}}\'].$invalid == true) }" ng-show="$field.formalizer.visible">\n  <label for="{{element.attrs.name}}" class="{{label.class}}" ng-bind="$field.label"></label>\n  <div class="{{element.container.class}}">\n    <select %element-attributes%>\n      {{defaultOption}}\n    </select>\n\n    <div class="help-block" ng-bind="$field.help"></div>\n\n    %element-error-list%\n  </div>\n</div>\n')}]),angular.module("templates/formalizer-slider.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-slider.tpl.html",'<div class="{{container.class}}" ng-class="{ \'has-error\' : (%scope-form-name%[\'{{element.attrs.name}}\'].$invalid == true) }" ng-show="$field.formalizer.visible">\n  <label for="{{element.attrs.name}}" class="{{label.class}}" ng-bind="$field.label"></label>\n  <div class="{{element.container.class}}">\n    <p class="{{element.wrap.class}}">\n        {{element.left}}\n        <div slider %element-attributes% />\n        {{element.right}}\n        <!-- hide an input with the value ?! -->\n    </p>\n\n    <div class="help-block" ng-bind="$field.help"></div>\n\n    %element-error-list%\n\n  </div>\n</div>\n')}]),angular.module("templates/formalizer-submit.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-submit.tpl.html",'<div class="{{container.class}}" ng-show="$field.formalizer.visible">\n  <div class="col-sm-10 col-sm-offset-2">\n    <button %element-attributes% ng-disabled="%scope-form-name%.$invalid" ng-bind="$field.label"></button>\n  </div>\n\n  <div class="help-block" ng-bind="$field.help"></div>\n\n</div>\n')}]),angular.module("templates/formalizer-textarea.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-textarea.tpl.html",'<div class="{{container.class}}" ng-class="{ \'has-error\' : (%scope-form-name%[\'{{element.attrs.name}}\'].$invalid == true) }" ng-show="$field.formalizer.visible">\n  <label for="{{element.attrs.name}}" class="{{label.class}}" ng-bind="$field.label"></label>\n  <div class="{{element.container.class}}">\n    <p class="{{element.wrap.class}}">\n        <textarea %element-attributes%>\n        </textarea>\n    </p>\n\n    <div class="help-block" ng-bind="$field.help"></div>\n\n    %element-error-list%\n\n  </div>\n</div>\n')}]),angular.module("templates/formalizer-typeahead.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer-typeahead.tpl.html",'<div class="{{container.class}}" ng-class="{ \'has-error\' : (%scope-form-name%[\'{{element.attrs.name}}\'].$invalid == true) }" ng-show="$field.formalizer.visible">\n  <label for="{{element.attrs.name}}" class="{{label.class}}" ng-bind="$field.label"></label>\n  <div class="{{element.container.class}}">\n    <p class="{{element.wrap.class}}">\n\n    <ul>\n      <li ng-repeat="obj in entity.ta_list">\n        <span>\\{\\{obj.name\\}\\} <a ng-click="{{options.del_fn}}(obj)"><span class="glyphicon glyphicon-trash"></span></a></span>\n      </li>\n    </ul>\n\n    </p>\n    <p class="{{element.wrap.class}}">\n        {{element.left}}\n        <input %element-attributes% />\n        {{element.right}}\n    </p>\n\n    <div class="help-block" ng-bind="$field.help"></div>\n\n    %element-error-list%\n\n  </div>\n</div>\n')}]),angular.module("templates/formalizer.fields.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/formalizer.fields.tpl.html",'<div ng-repeat="field in field.fields">\n    <!-- <pre>{{field | json}}</pre> -->\n    <div ng-formalizer-field="field"></div>\n\n    <div class="col-sm-offset-1" ng-show="field.formalizer.visible_children">\n      <div ng-include="\'templates/formalizer.fields.tpl.html\'"></div>\n    </div>\n</div>\n')}]);var Formalizer;!function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}function b(a){a["class"]=a["class"].filter(function(a){return a&&a.length?a:!1}).join(" ")}var c={};Formalizer=function(a,b,c,d){this.fields=[],this.groups={},this.$scope=a,this.$parse=b,this.$interpolate=c,this.$log=d},Formalizer.prototype.onSubmit=null,Formalizer.prototype.name=null,Formalizer.prototype.type=null,Formalizer.prototype.fields=null,Formalizer.prototype.groups=null,Formalizer.prototype.attempts=0,Formalizer.prototype.horizontal=!1,Formalizer.prototype.vertical=!1,Formalizer.prototype.inline=!1,Formalizer.prototype.$scope=null,Formalizer.prototype.$parse=null,Formalizer.prototype.$log=null,Formalizer.prototype.$interpolate=null,Formalizer.types={columns:"columns"},Formalizer.templates=[],Formalizer.parsers={},Formalizer.loadTemplates=function(a,b,d){return a.all(this.templates.concat(["error-list","input","textarea","checkbox","select","submit","typeahead","checkbox-list","columns"]).map(function(a){return b.get("templates/formalizer-"+a+".tpl.html",{cache:d}).success(function(b){c[a]=b})}))},Formalizer.prototype.getTemplate=function(a){var b=c[Formalizer.types[a]]||null;if(!b)throw new Error("template not found for: "+a);return b},Formalizer.prototype.submit=function(){var a=this.$parse(this.onSubmit)(this.$scope.$parent),b=this.$scope[this.name];if(!a)throw new Error("options.onSubmit is required");if(++this.attempts,b.$valid){var c,d,e,f,g={},h=null;for(c in b)if("$"!==c[0])if(f=this.fields.filter(function(a){return a.formalizer.element.attrs.name===c}),b[c].$dirty)g[c]=b[c].$modelValue;else if(f&&f.length&&"file"===f[0].type)for(e=f[0].domElement[0],h=h||[],d=0;d<e.files.length;++d)h.push(e.files[d]);return a(g,h,this.$scope.$eval(this.model),b)}this.$log.info("$invalid = true, no submit")},Formalizer.prototype.callParser=function(a,b,c,d){var e,f=c.type;return"function"==typeof Formalizer.parsers[f]&&"post"===a?e=Formalizer.parsers[f](b,c,this):Formalizer.parsers[f]&&"function"==typeof Formalizer.parsers[f][a]&&(e=Formalizer.parsers[f][a](b,c,this,d)),e},Formalizer.prototype.createFieldMeta=function(b,c,d,e){var f,g=b.constraints||{},h=b.actions||{},i={visible:!0,visible_children:!0,type:b.type||"text",scope_name:c,container:{"class":["form-group"]},label:{"class":["control-label"].concat((b.labelClass||"").split(" "))},element:{container:{"class":[]},wrap:{"class":[]},attrs:{name:b.name,id:this.name+"-"+b.name,type:b.type||"text","ng-formalizer-attach":""},right:"",left:""},messages:b.messages||{},source:null,source_display:b.source_display||null,source_model:b.source_model||null,options:angular.extend(b.options||{},{scope_name:c})};void 0!==b.default&&(i.element.attrs["ng-default"]="$field.default");var j=i.element.attrs.name;"string"==typeof b.source?(i.source=e.$eval(b.source),e.$watch(b.source,function(a){i.source=a})):void 0!==b.source&&(i.source=b.source,e.$watch("$field.source",function(a){i.source=a})),i.element.attrs["ng-model"]=b.model||this.model+"."+j,i.element.attrs["class"]=["form-control"].concat((b["class"]||"").split(" ")),i.element.attrs["ng-class"]="{'has-error': $formalizer.attempts > 0 && "+this.name+"."+i.element.attrs.name+".$invalid}",i.element.attrs["ng-placeholder"]=b.placeholder||"";var k;for(f in g)"min"===f||"max"===f?(i.element.attrs[f]=g[f],i.container.class.push(f)):(k="ng-"+f,i.element.attrs[k]=g[f],i.container.class.push(k));for(f in h)k="ng-"+f,i.element.attrs[k]=h[f];switch(this.type){case"horizontal":"checkbox"===b.type?(i.element.container["class"].push("col-sm-offset-2"),i.label["class"].push("col-sm-12"),a(i.label["class"],"control-label")):(i.element.container["class"].push("col-sm-9"),i.label["class"].push("col-sm-2"));break;case"vertical":break;case"inline":}return i},Formalizer.prototype.createField=function(a,d,e){d.$field=a;var f,g,h,i;if(!a.name&&"raw"!==a.type)throw this.$log.log(a),new Error("invalid field without name");var j="$field.formalizer";this.callParser("pre",d,a),i=this.createFieldMeta(a,j,e,d),this.callParser("post",d,i),Object.defineProperty(a,"formalizer",{value:i,writable:!0,enumerable:!1,configurable:!1}),a.group&&(this.groups[a.group]=this.groups[a.group]||[],this.groups[a.group].push(a)),b(i.element.wrap),b(i.container),b(i.element.container),b(i.element.attrs),b(i.label),g=[];for(f in i.element.attrs)g.push(f+'="'+i.element.attrs[f]+'"');g=g.join(" "),h=this.getTemplate(i.type);var k="";-1!==h.indexOf("%element-error-list%")&&(k=this.$interpolate(this.$interpolate(c["error-list"])(i))(i));var l=h.replace("%element-attributes%",g).replace("%element-error-list%",k).replace(/%scope-form-name%/g,this.name);l=this.$interpolate(l)(i).replace(/\\\{/g,"{").replace(/\\\}/g,"}");var m=this.callParser("html",d,a,l);return m&&(l=m),l},Formalizer.prototype.createColumns=function(a,b){var c;for(c=0;c<a.length;++c)if(!a[c].cols)throw this.$log.error(a[c]),new Error("cols is not defined");return b.columns=a,this.getTemplate("columns")},Formalizer.prototype.attach=function(a,b,c){c.formalizer.domElement=b,this.callParser("attached",a,c)},Formalizer.prototype.setModel=function(a,b,c){var d=this.$scope.$eval(this.model);(!d[a]||c)&&(d[a]=b),Array.isArray(d[a])&&c&&-1===d[a].indexOf(b)&&d[a].push(b)},Formalizer.toFormData=function(a,b,c){var d,e=new FormData,f=0;for(e.append(b,JSON.stringify(a)),d=0;d<c.length;d++)e.append("file"+ ++f,c[d]);return e},Formalizer.prototype.showGroups=function(a){var b=this;a.split(",").forEach(function(a){if(b.groups[a]){var c;for(c=0;c<b.groups[a].length;++c)b.groups[a][c].formalizer.visible=!0}})},Formalizer.prototype.hideGroups=function(a){var b=this;a.split(",").forEach(function(a){if(b.groups[a]){var c;for(c=0;c<b.groups[a].length;++c)b.groups[a][c].formalizer.visible=!1}})}}(),function(){"use strict";Formalizer.templates.push("raw"),Formalizer.types.raw="raw",Formalizer.parsers.raw={attached:function(a,b){a.$watch("$field.template",function(a){b.formalizer.domElement.html(a)})}}}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}Formalizer.templates.push("submit"),Formalizer.types.submit="submit",Formalizer.parsers.submit=function(b,c){delete c.element.attrs["ng-model"],delete c.element.attrs["ng-class"],delete c.element.attrs["ng-placeholder"],a(c.element.attrs["class"],"form-control"),c.element.attrs["class"].push("btn")}}(),function(){"use strict";Formalizer.templates.push("select"),Formalizer.types.select="select",Formalizer.parsers.select=function(a,b,c){b.defaultOption=c.empty_msg?'<option value="">'+c.empty_msg+"</option>":"",b.source_display=b.source_display||"label";var d=b.source_model?"."+b.source_model:"";b.element.attrs["ng-options"]="c"+d+" as c."+b.source_display+" for c in $field.formalizer.source",b.options.multiple&&(b.element.attrs.multiple="multiple")}}(),function(){"use strict";Formalizer.templates.push("textarea"),Formalizer.types.textarea="textarea",Formalizer.parsers.textarea=function(){}}(),function(){"use strict";Formalizer.templates.push("checkbox"),Formalizer.types.checkbox="checkbox",Formalizer.parsers.checkbox=function(a,b){b.container["class"].push("checkbox")}}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}Formalizer.templates.push("radio-list"),Formalizer.types["radio-list"]="radio-list",Formalizer.parsers["radio-list"]=function(b,c){c.element.attrs.type="radio",c.container["class"].push("radio"),a(c.element.attrs["class"],"form-control"),c.source_model=c.source_model?"."+c.source_model:""}}(),function(){"use strict";function a(a){return a.replace(d,function(a,b,c,d){return d?c.toUpperCase():c}).replace(e,"Moz$1")}function b(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}var c=["typeahead-append-to-body","typeahead-editable","typeahead-input-formatter","typeahead-loading","typeahead-min-length","typeahead-template-url","typeahead-wait-ms"],d=/([\:\-\_]+(.))/g,e=/^moz([A-Z])/;Formalizer.templates.push("typeahead"),Formalizer.types.typeahead="typeahead",Formalizer.types["typeahead-multi"]="typeahead",Formalizer.parsers.typeahead=function(a,b){b.element.attrs.type="text",b.element.attrs.typeahead=b.source_display?"p as p."+b.source_display+" for p in $field.formalizer.source | filter:{"+b.source_display+":$viewValue}":"for p in $field.formalizer.source",angular.forEach(c,function(a){b.options[a]&&(b.element.attrs[a]=b.options[a])})},Formalizer.parsers["typeahead-multi"]=function(c,d){var e=d.element.attrs.name,f=a("add-"+e),g=a("del-"+e),h=d.element.attrs["ng-model"],i=d.element.attrs["ng-model"]+"_sel";d.element.attrs["ng-model"]=i;var j=c.$eval(h);void 0===j&&c.$eval(h+" = []"),c[f]=function(a){var b=c.$eval(h);-1===b.indexOf(a)&&b.push(a),c.$eval(i+" = ''")},c[g]=function(a){var d=c.$eval(h);b(d,a)},d.options.model=h,d.options.del_fn=g,d.element.attrs["typeahead-on-select"]=f+"($item, $model, $label)",Formalizer.parsers.typeahead(c,d)}}(),function(){"use strict";var a=["datepicker-mode","min-date","max-date","date-disabled","show-weeks","starting-day","init-date","min-mode","max-mode","format-day","format-month","format-year","format-day-header","format-day-title","format-month-title","year-range","show-button-bar","current-text","clear-text","close-text","close-on-date-selection","datepicker-append-to-body","datepicker-options"];Formalizer.types.datepicker="input",Formalizer.parsers.datepicker=function(b,c){var d=c.element.attrs.name,e=d+"Open",f=d+"Close",g=c.options["datepicker-options"]||d+"Options";angular.forEach(a,function(a){c.options[a]&&(c.element.attrs[a]=c.options[a])}),c.element.wrap["class"].push("input-group"),c.element.right='<span class="input-group-btn"><button ng-click="'+e+'($event)" class="btn btn-default" type="button"><i class="glyphicon glyphicon-calendar"></i></button>',c.element.attrs["is-open"]=g,c.element.attrs["datepicker-popup"]=c.options["datepicker-popup"]||"",c.element.attrs["ng-focus"]=e+"()",c.element.attrs["ng-datepicker-fix"]="",b[g]=!1,b[f]=function(){b[g]=!1},b[e]=function(a){a&&(a.preventDefault(),a.stopPropagation()),b[g]=!0,a&&setTimeout(function(){angular.element("#"+c.element.attrs.id).focus()},0)}}}(),function(){"use strict";Formalizer.templates.push("input"),Formalizer.types.text="input",Formalizer.types.password="input",Formalizer.types.number="input",Formalizer.types.email="input",Formalizer.types.tel="input",Formalizer.types.url="input",Formalizer.types.file="input"}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}Formalizer.templates.push("checkbox-list"),Formalizer.types["checkbox-list"]="checkbox-list",Formalizer.parsers["checkbox-list"]=function(b,c){var d=c.element.attrs["checklist-model"]=c.element.attrs["ng-model"];delete c.element.attrs["ng-model"],c.options.chkall_model=c.scope_name+".options.chkall_value",c.source_display=c.source_display||"label",c.options.check_all=function(){var a=b.$eval(c.options.chkall_model),e=b.$eval(d);if(void 0===e&&(b.$eval(d+" = []"),e=b.$eval(d)),e.splice(0,e.length),a){var f=b.$eval("$field.formalizer.source");f.forEach(function(a,d){e.push(b.$eval("$field.formalizer.source["+d+"]"+(c.source_model?"."+c.source_model:"")))})}},c.element.attrs["checklist-value"]="checkbox_data"+(c.source_model?"."+c.source_model:""),c.element.attrs.type="checkbox",c.container["class"].push("checkbox"),a(c.element.attrs["class"],"form-control")}}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}Formalizer.templates.push("slider"),Formalizer.types.slider="slider",Formalizer.parsers.slider=function(b,c){a(c.element.attrs["class"],"form-control"),["min","max","step","precision","orientation","range","selection","tooltip","tooltipSeparator","tooltipSplit","handle","reversed","enabled","naturalArrowKeys","sliderId","updateEvent"].forEach(function(a){void 0!==c.options[a]&&(c.element.attrs[a]=c.options[a])})}}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}Formalizer.templates.push("richtext"),Formalizer.types.richtext="richtext",Formalizer.parsers.richtext=function(b,c){a(c.element.attrs["class"],"form-control")}}(),function(){angular.module("formalizer",["ui.bootstrap","checklist-model","ui.bootstrap-slider","formalizer-tpls","textAngular"]).value("FormalizerConfig",{}).directive("ngFormalizer",["$parse","$interpolate","$http","$templateCache","$q","$log","FormalizerConfig",function(a,b,c,d,e,f,g){var h=Formalizer.loadTemplates(e,c,d,g),i=angular.version;return{restrict:"A",replace:!0,scope:!0,templateUrl:"templates/formalizer-form-"+i.major+"."+Math.min(3,i.minor)+".tpl.html",priority:500,controller:function(c){var d=new Formalizer(c,a,b,f);if(angular.version.minor>2){var e=this;Object.keys(Formalizer.prototype).forEach(function(a){e[a]=d[a]})}return c.$formalizer=d,c.$formalizer},compile:function(){return{pre:function(a,b,c){var d=(jQuery(b).find(".fieldset-contents"),a.$eval(c.ngFormalizer)),e=a.$formalizer;if(!d)throw new Error("formalizer configuration must be sent");if(-1!==c.ngFormalizer.indexOf("{"))throw new Error("ng-formalizer must be a string");if(!d.name)throw new Error("formalizer require form name");h.then(function(){f.info("formalizer is ready");a.$watch(c.ngFormalizer,function(a){["name","type","model","legend","onSubmit"].forEach(function(b){e[b]=a[b]}),e.horizontal=e.vertical=e.inline=!1,e[e.type]=!0},!0)}),["name","type","legend","onSubmit"].forEach(function(a){e[a]=d[a]}),e.horizontal=e.vertical=e.inline=!1,e[e.type]=!0,"string"==typeof d.fields?a.$watch(d.fields,function(a){e.fields=a},!0):e.fields=d.fields},post:function(){}}}}}])}(),angular.module("formalizer").directive("ngFormalizerField",["$timeout","$compile",function(a,b){return{scope:!0,link:function(c,d,e){var f,g=c.$formalizer,h=c.$eval(e.ngFormalizerField);f=Array.isArray(h)?g.createColumns(h,c):g.createField(h,c,c.$index);var i=angular.element(f);d.append(i),a(function(){b(i)(c),c.$digest()})}}}]),angular.module("formalizer").directive("ngFormalizerAttach",function(){return{link:function(a,b){a.$formalizer.attach(a,b,a.$eval("$field"))}}}),angular.module("formalizer").directive("ngBlacklist",function(){return{require:"ngModel",link:function(a,b,c,d){var e=a.$eval(c.ngBlacklist);"string"==typeof e&&(e=e.split(",")),d.$parsers.unshift(function(a){return d.$setValidity("blacklist",-1===e.indexOf(a)),a})}}}),angular.module("formalizer").directive("ngEqualTo",function(){return{require:"?ngModel",link:function(a,b,c,d){d&&a.$watch(c.ngEqualTo,function(a){var b=""===d.$modelValue?null:d.$modelValue||null,c=""===a?null:a||null;d.$setValidity("equal-to",c==b)})}}}),function(){"use strict";function a(a){return a.replace(b,function(a,b,c,d){return d?c.toUpperCase():c}).replace(c,"Moz$1")}var b=/([\:\-\_]+(.))/g,c=/^moz([A-Z])/;angular.forEach({"only-alpha":/^[a-zA-Z]*$/i,"one-upper":/^(?=.*[A-Z]).+$/,"one-lower":/^(?=.*[a-z]).+$/,"one-number":/^(?=.*[0-9]).+$/,"one-alpha":/^(?=.*[a-z]).+$/i,"no-spaces":/^[^\s]+$/,hexadecimal:/^[0-9a-fA-F]+$/,"hex-color":/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/},function(b,c){angular.module("formalizer").directive(a("ng-"+c),function(){return{require:"ngModel",link:function(a,d,e,f){f.$parsers.unshift(function(a){return void 0!==a&&null!==a&&(""+a).length>0&&f.$setValidity(c,b.test(a)),a})}}})})}(),angular.module("formalizer").constant("datepickerPopupFix",{datepickerPopup:"YYYY-MM-DD",datepickerTZ:void 0}).directive("ngDatepickerFix",["datepickerPopupFix",function(a){return{require:"?ngModel",priority:100,link:function(b,c,d,e){e.$parsers.unshift(function(b){var c;return c="string"==typeof b?moment(b,a.datepickerPopup):moment(b),c.isValid()?void 0!==a.datepickerTZ?new Date(c.toDate().toDateString()+" 00:00 GMT"+a.datepickerTZ):c.toDate():b})}}}]),angular.module("formalizer").directive("ngPopulate",function(){return{require:["^ngFormalizer","ngModel"],link:function(a,b,c,d){$ngFormalizer=d[0],$ngModel=d[1];var e=a.$eval(c.ngPopulate);$ngModel.$parsers.push(function(a){return e&&e[a]&&$ngFormalizer.setModel(e[a][0],e[a][1],e[a][2]||!1),a})}}}),angular.module("formalizer").directive("ngServerValidation",["$http",function(a){return{require:"ngModel",link:function(b,c,d,e){var f,g,h=d.ngServerValidation,i=d.ngRequestKey||"value",j=d.ngResponseKey||"value";jQuery(c).focusout(function(){if(g!=f){g=f;var b={};b[i]=f,a.post(h,b).success(function(a){e.$setValidity("server-validation-in-progress",!0),e.$setValidity("server-validation",!!a[j])}).error(function(){e.$setValidity("server-validation-in-progress",!0)})}}),e.$parsers.unshift(function(a){return a?(e.$setValidity("server-validation-in-progress",!1),f=a,a):void 0})}}}]),angular.module("formalizer").directive("ngDefault",["$timeout",function(a){return{require:"ngModel",link:function(b,c,d,e){function f(a){return"number"==typeof a&&""+a=="NaN"}var g=b.$eval(d.ngDefault),h=b.$eval(d.ngDefaultValues);if(h){if(!Array.isArray(h))throw new Error("ngDefaultValues must be an array of values");h.push(void 0)}else h=[void 0];a(function(){(f(e.$modelValue)||-1!==h.indexOf(e.$modelValue))&&b.$eval(d.ngModel+" = "+JSON.stringify(g))})}}}]),angular.module("formalizer").directive("ngHideGroups",function(){return{require:"ngModel",link:function(a,b,c){var d=a.$eval(c.ngHideGroups),e=Object.keys(d);a.$watch(c.ngModel,function(b,c){e.indexOf(""+b)>=0&&a.$formalizer.hideGroups(d[b]),e.indexOf(""+c)>=0&&a.$formalizer.showGroups(d[c])})}}}),angular.module("formalizer").directive("ngHideChildren",function(){return{require:"ngModel",link:function(a,b,c){var d,e=a.$eval(c.ngHideChildren),f=[];for(d in e)e[d]&&f.push(d);a.$watch(c.ngModel,function(b){a.$field.formalizer.visible_children=-1===f.indexOf(""+b)})}}}),angular.forEach("Selected,Checked,Disabled,Readonly,Required,Open".split(","),function(a){var b="ngOn"+a,c=a.toLowerCase();angular.module("formalizer").directive(b,function(){return{restrict:"A",priority:100,link:function(a,d,e){a.$watch(function(){return d.prop(c)},function(f){var g={$element:d};g["$"+c]=f,a.$eval(e[b],g)})}}})});