var Formalizer;!function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}function b(a){a["class"]=a["class"].filter(function(a){return a&&a.length?a:!1}).join(" ")}function c(a){a["ng-class"]&&(a["ng-class"]="{"+a["ng-class"].join(",")+"}")}function d(a){var b,c=[];for(b in a)c.push("string"==typeof a[b]?b+'="'+a[b].replace(/\"/g,"&quot;")+'"':b+'="'+a[b]+'"');return c.join(" ")}var e={};Formalizer=function(a,b,c,d){this.fields=[],this.groups={},this.$scope=a,this.$parse=b,this.$interpolate=c,this.$log=d},Formalizer.prototype.onSubmit=null,Formalizer.prototype.name=null,Formalizer.prototype.type=null,Formalizer.prototype.fields=null,Formalizer.prototype.groups=null,Formalizer.prototype.attempts=0,Formalizer.prototype.horizontal=!1,Formalizer.prototype.vertical=!1,Formalizer.prototype.inline=!1,Formalizer.prototype.$scope=null,Formalizer.prototype.$parse=null,Formalizer.prototype.$log=null,Formalizer.prototype.$interpolate=null,Formalizer.types={columns:"columns"},Formalizer.templates=[],Formalizer.parsers={},Formalizer.loadTemplates=function(a,b,c){return a.all(this.templates.concat(["error-list","input","hidden","textarea","checkbox","select","submit","typeahead","checkbox-list","columns"]).map(function(a){return b.get("templates/formalizer-"+a+".tpl.html",{cache:c}).success(function(b){e[a]=b})}))},Formalizer.prototype.getTemplate=function(a){var b=e[Formalizer.types[a]]||null;if(!b)throw new Error("template not found for: "+a);return b},Formalizer.prototype.submit=function(){var a=this.$parse(this.onSubmit)(this.$scope.$parent),b=this.$scope[this.name];if(!a)throw new Error("options.onSubmit is required");if(++this.attempts,b.$valid){var c,d,e,f,g={},h=null;for(c in b)if("$"!==c[0])if(f=this.fields.filter(function(a){return a.formalizer.element.attrs.name===c}),b[c].$dirty)g[c]=b[c].$modelValue;else if(f&&f.length&&"file"===f[0].type)for(e=f[0].domElement[0],h=h||[],d=0;d<e.files.length;++d)h.push(e.files[d]);return a(g,h,this.$scope.$eval(this.model),b)}this.$log.info("form is $invalid, no submit")},Formalizer.prototype.callParser=function(a,b,c,d){var e,f=c.type;return"function"==typeof Formalizer.parsers[f]&&"post"===a?e=Formalizer.parsers[f](b,c,this):Formalizer.parsers[f]&&"function"==typeof Formalizer.parsers[f][a]&&(e=Formalizer.parsers[f][a](b,c,this,d)),e},Formalizer.prototype.createFieldMeta=function(b,c,d,e){var f,g=b.constraints||{},h=b.actions||{},i=b.attrs||{},j=b.cattrs||{},k={visible:!0,visible_children:!0,type:b.type||"text",scope_name:c,container:{"class":["form-group","formalizer-element"],"ng-class":null,"ng-show":"$field.formalizer.visible"},label:{"class":["control-label"].concat((b.labelClass||"").split(" ")),size:parseInt(b.label_size,10)||2},element:{size:parseInt(b.element_size,10),container:{"class":[]},wrap:{"class":[]},attrs:{name:b.name,id:this.name+"-"+b.name,type:b.type||"text","ng-formalizer-attach":""},right:"",left:""},messages:b.messages||{},source:null,source_display:b.source_display||null,source_model:b.source_model||null,options:angular.extend(b.options||{},{scope_name:c})};k.container["class"].push("formalizer-"+k.type),k.container["ng-class"]=['"has-error" : ('+this.name+'["'+k.element.attrs.name+'"].$invalid == true)'],void 0!==b["default"]&&(k.element.attrs["ng-default"]="$field.default");var l=k.element.attrs.name;"string"==typeof b.source?(k.source=e.$eval(b.source),e.$watch(b.source,function(a){k.source=a})):void 0!==b.source&&(k.source=b.source,e.$watch("$field.source",function(a){k.source=a})),k.element.attrs["ng-model"]=b.model||this.model+"."+l,k.element.attrs["class"]=["form-control"].concat((b["class"]||"").split(" ")),k.element.attrs["ng-class"]=['"has-error": $formalizer.attempts > 0 && '+this.name+"."+k.element.attrs.name+".$invalid"],k.element.attrs["ng-placeholder"]=b.placeholder||"";var m;for(f in g)-1!==["required","disabled"].indexOf(f)?(m="ng-"+f,k.element.attrs[m]=g[f],k.container["ng-class"].push(JSON.stringify(m)+":"+g[f])):-1!==["min","max","max-date","min-date"].indexOf(f)?(k.element.attrs[f]=g[f],k.container["class"].push(f)):(m="ng-"+f,k.element.attrs[m]=g[f],k.container["class"].push(m));for(f in h)m="ng-"+f,k.element.attrs[m]=h[f];for(f in i)k.element.attrs[f]=i[f];for(f in j)k.container[f]=j[f],"ng-hide"==f&&(k.container["ng-hide-emit"]=j[f]);switch(this.type){case"horizontal":var n=k.label.size,o=k.element.size||12-k.label.size;"checkbox"===b.type?(k.element.container["class"].push("col-sm-offset-"+n),k.label["class"].push("col-sm-12"),a(k.label["class"],"control-label")):k.label["class"].push("col-sm-"+n),k.element.container["class"].push("col-sm-"+o);break;case"vertical":break;case"inline":}return k},Formalizer.prototype.createField=function(a,f,g){f.$field=a;var h,i;if(!a.name&&"raw"!==a.type)throw this.$log.error(a),new Error("invalid field without name");var j="$field.formalizer";this.callParser("pre",f,a),i=this.createFieldMeta(a,j,g,f),this.callParser("post",f,i),Object.defineProperty(a,"formalizer",{value:i,writable:!0,enumerable:!1,configurable:!1}),a.group&&(this.groups[a.group]=this.groups[a.group]||[],this.groups[a.group].push(a)),b(i.element.wrap),b(i.container),b(i.element.container),b(i.element.attrs),b(i.label),c(i.container),c(i.element.attrs),i.container.attrs_text=d(i.container),h=this.getTemplate(i.type);var k="";-1!==h.indexOf("%element-error-list%")&&(k=this.$interpolate(this.$interpolate(e["error-list"])(i))(i));var l=h.replace("%element-attributes%",d(i.element.attrs)).replace("%element-error-list%",k).replace(/%scope-form-name%/g,this.name);l=this.$interpolate(l)(i).replace(/\\\{/g,"{").replace(/\\\}/g,"}");var m=this.callParser("html",f,a,l);return m&&(l=m),l},Formalizer.prototype.createColumns=function(a,b){var c;for(c=0;c<a.length;++c)if(!a[c].cols)throw this.$log.error(a[c]),new Error("cols is not defined");return b.columns=a,this.getTemplate("columns")},Formalizer.prototype.attach=function(a,b,c,d){c.formalizer.domElement=b,this.callParser("attached",a,c,d)},Formalizer.prototype.setModel=function(a,b,c){var d=this.$scope.$eval(this.model);(!d[a]||c)&&(d[a]=b),Array.isArray(d[a])&&c&&-1===d[a].indexOf(b)&&d[a].push(b)},Formalizer.toFormData=function(a,b,c){var d,e=new FormData,f=0;for(e.append(b,JSON.stringify(a)),d=0;d<c.length;d++)e.append("file"+ ++f,c[d]);return e},Formalizer.prototype.showGroups=function(a){var b=this;a.split(",").forEach(function(a){if(b.groups[a]){var c;for(c=0;c<b.groups[a].length;++c)b.groups[a][c].formalizer.visible=!0}})},Formalizer.prototype.hideGroups=function(a){var b=this;a.split(",").forEach(function(a){if(b.groups[a]){var c;for(c=0;c<b.groups[a].length;++c)b.groups[a][c].formalizer.visible=!1}})}}(),function(){"use strict";Formalizer.templates.push("raw"),Formalizer.types.raw="raw",Formalizer.parsers.raw={attached:function(a,b,c,d){var e=b.formalizer.domElement;a.$watch("$field.template",function(c){e.html(c),console.log("$field.template",b),b.options.compile&&d(e.contents())(a)})}}}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}Formalizer.templates.push("submit"),Formalizer.types.submit="submit",Formalizer.parsers.submit=function(b,c){delete c.element.attrs["ng-model"],delete c.element.attrs["ng-class"],delete c.element.attrs["ng-placeholder"],a(c.element.attrs["class"],"form-control"),c.element.attrs["class"].push("btn")}}(),function(){"use strict";Formalizer.templates.push("select"),Formalizer.types.select="select",Formalizer.parsers.select=function(a,b,c){b.defaultOption=c.empty_msg?'<option value="">'+c.empty_msg+"</option>":"",b.source_display=b.source_display||"label";var d=b.source_model?"."+b.source_model:"";b.element.attrs["ng-options"]="c"+d+" as c."+b.source_display+" for c in $field.formalizer.source",b.options.multiple&&(b.element.attrs.multiple="multiple")}}(),function(){"use strict";Formalizer.templates.push("textarea"),Formalizer.types.textarea="textarea",Formalizer.parsers.textarea=function(){}}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}Formalizer.templates.push("checkbox"),Formalizer.types.checkbox="checkbox",Formalizer.parsers.checkbox=function(b,c){c.container["class"].push("checkbox"),a(c.element.attrs["class"],"form-control")}}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}Formalizer.templates.push("radio-list"),Formalizer.types["radio-list"]="radio-list",Formalizer.parsers["radio-list"]=function(b,c){c.element.attrs.type="radio",c.element.container["class"].push("radio"),a(c.element.attrs["class"],"form-control"),c.source_model=c.source_model?"."+c.source_model:""}}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}var b=["typeahead-append-to-body","typeahead-editable","typeahead-input-formatter","typeahead-loading","typeahead-min-length","typeahead-template-url","typeahead-wait-ms"];Formalizer.templates.push("typeahead"),Formalizer.types.typeahead="typeahead",Formalizer.types["typeahead-multi"]="typeahead",Formalizer.parsers.typeahead=function(a,c){c.element.attrs.type="text",c.element.attrs.typeahead=c.source_display?"p as p."+c.source_display+" for p in $field.formalizer.source | filter:{"+c.source_display+":$viewValue}":"p for p in $field.formalizer.source",angular.forEach(b,function(a){c.options[a]&&(c.element.attrs[a]=c.options[a])})},Formalizer.parsers["typeahead-multi"]=function(b,c){var d=(c.element.attrs.name,c.element.attrs["ng-model"]),e=c.element.attrs["ng-model"]+"_sel";c.element.attrs["ng-model"]=e;var f=b.$eval(d);void 0===f&&b.$eval(d+" = []"),b.taSelected=c.options.taSelected||function(){return b.$eval(d)},b.taAppend=function(a,f,g){if(c.options.taAppend)c.options.taAppend(a,f,g);else{var h=b.$eval(d);-1===h.indexOf(a)&&h.push(a)}b.$eval(e+" = ''")},b.taRemove=c.options.taRemove||function(c){var e=b.$eval(d);a(e,c)},c.element.attrs["typeahead-on-select"]="taAppend($item, $model, $label)",Formalizer.parsers.typeahead(b,c)}}(),function(){"use strict";var a=["datepicker-mode","min-date","max-date","date-disabled","show-weeks","starting-day","init-date","min-mode","max-mode","format-day","format-month","format-year","format-day-header","format-day-title","format-month-title","year-range","show-button-bar","current-text","clear-text","close-text","close-on-date-selection","datepicker-append-to-body","datepicker-options"];Formalizer.types.datepicker="input",Formalizer.parsers.datepicker=function(b,c){var d=c.element.attrs.name,e=d+"Open",f=d+"Close",g=c.options["datepicker-options"]||d+"Options";angular.forEach(a,function(a){c.options[a]&&(c.element.attrs[a]=c.options[a])}),c.element.wrap["class"].push("input-group"),c.element.right='<span class="input-group-btn"><button ng-click="'+e+'($event)" class="btn btn-default" type="button"><i class="glyphicon glyphicon-calendar"></i></button>',c.element.attrs["is-open"]=g,c.element.attrs["datepicker-popup"]=c.options["datepicker-popup"]||"",c.element.attrs["ng-focus"]=e+"()",c.element.attrs["ng-datepicker-fix"]="",b[g]=!1,b[f]=function(){b[g]=!1},b[e]=function(a){a&&(a.preventDefault(),a.stopPropagation()),b[g]=!0,a&&setTimeout(function(){angular.element("#"+c.element.attrs.id).focus()},0)}}}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}Formalizer.templates.push("input"),Formalizer.templates.push("hidden"),Formalizer.types.text="input",Formalizer.types.password="input",Formalizer.types.number="input",Formalizer.types.email="input",Formalizer.types.tel="input",Formalizer.types.url="input",Formalizer.types.file="input",Formalizer.types.lcheckbox="input",Formalizer.types.hidden="hidden",Formalizer.parsers.lcheckbox=function(b,c){c.element.attrs.type="checkbox",c.element.container["class"].push("checkbox"),a(c.element.attrs["class"],"form-control")}}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}Formalizer.templates.push("checkbox-list"),Formalizer.types["checkbox-list"]="checkbox-list",Formalizer.parsers["checkbox-list"]=function(b,c){var d=c.element.attrs["checklist-model"]=c.element.attrs["ng-model"];delete c.element.attrs["ng-model"],c.options.chkall_model=c.scope_name+".options.chkall_value",c.source_display=c.source_display||"label",c.options.check_all=function(){var a=b.$eval(c.options.chkall_model),e=b.$eval(d);if(void 0===e&&(b.$eval(d+" = []"),e=b.$eval(d)),e.splice(0,e.length),a){var f=b.$eval("$field.formalizer.source");f.forEach(function(a,d){e.push(b.$eval("$field.formalizer.source["+d+"]"+(c.source_model?"."+c.source_model:"")))})}},c.element.attrs["checklist-value"]="checkbox_data"+(c.source_model?"."+c.source_model:""),c.element.attrs.type="checkbox",c.element.container["class"].push("checkbox"),a(c.element.attrs["class"],"form-control")}}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}Formalizer.templates.push("checkbox-matrix"),Formalizer.types["checkbox-matrix"]="checkbox-matrix",Formalizer.parsers["checkbox-matrix"]=function(b,c){a(c.element.attrs["class"],"form-control"),c.options.model=c.element.attrs["ng-model"],delete c.element.attrs["ng-model"],c.options.name=c.element.attrs.name,delete c.element.attrs.name,c.options.id=c.element.attrs.id,delete c.element.attrs.id,c.element.attrs.type="checkbox",c.source_model||b.$watch("field.source_display",function(){c.source_model=[[],[]];var a=c.options.model;c.source_display[0].forEach(function(){var d=c.source_model[0].length;c.source_model[0].push(d),b.$eval(a+"["+d+"] = "+a+"["+d+"] || [];")}),c.source_display[1].forEach(function(){c.source_model[1].push(c.source_model[1].length)})},!0)}}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}Formalizer.templates.push("slider"),Formalizer.types.slider="slider",Formalizer.parsers.slider=function(b,c){a(c.element.attrs["class"],"form-control"),["min","max","step","precision","orientation","range","selection","tooltip","tooltipSeparator","tooltipSplit","handle","reversed","enabled","naturalArrowKeys","sliderId","updateEvent"].forEach(function(a){void 0!==c.options[a]&&(c.element.attrs[a]=c.options[a])})}}(),function(){"use strict";function a(a,b){var c=a.indexOf(b);return-1!==c?a.splice(c,1):!1}Formalizer.templates.push("richtext"),Formalizer.types.richtext="richtext",Formalizer.parsers.richtext=function(b,c){a(c.element.attrs["class"],"form-control")}}(),function(){angular.module("formalizer",["ui.bootstrap","checklist-model","ui.bootstrap-slider","formalizer-tpls","textAngular"]).config(["$sceProvider",function(a){a.enabled(!1)}]).value("FormalizerConfig",{}).directive("ngFormalizer",["$parse","$interpolate","$http","$templateCache","$q","$log","FormalizerConfig",function(a,b,c,d,e,f,g){var h=Formalizer.loadTemplates(e,c,d,g),i=angular.version;return{restrict:"A",replace:!0,scope:!0,templateUrl:"templates/formalizer-form-"+i.major+"."+Math.min(3,i.minor)+".tpl.html",priority:500,controller:function(c){var d=new Formalizer(c,a,b,f);if(angular.version.minor>2){var e=this;Object.keys(Formalizer.prototype).forEach(function(a){e[a]=d[a]})}return c.$formalizer=d,c.$formalizer},compile:function(){return{pre:function(a,b,c){var d=(jQuery(b).find(".fieldset-contents"),a.$eval(c.ngFormalizer)),e=a.$formalizer;if(!d)throw new Error("formalizer configuration must be sent");if(-1!==c.ngFormalizer.indexOf("{"))throw new Error("ng-formalizer must be a string");if(!d.name)throw new Error("formalizer require form name");h.then(function(){f.info("formalizer is ready");a.$watch(c.ngFormalizer,function(a){["name","type","model","legend","onSubmit"].forEach(function(b){e[b]=a[b]}),e.horizontal=e.vertical=e.inline=!1,e[e.type]=!0},!0)}),["name","type","legend","onSubmit"].forEach(function(a){e[a]=d[a]}),e.horizontal=e.vertical=e.inline=!1,e[e.type]=!0,"string"==typeof d.fields?a.$watch(d.fields,function(a){e.fields=a},!0):e.fields=d.fields},post:function(){}}}}}])}(),angular.module("formalizer").directive("ngFormalizerField",["$timeout","$compile",function(a,b){return{scope:!0,link:function(c,d,e){var f,g=c.$formalizer,h=c.$eval(e.ngFormalizerField);f=Array.isArray(h)?g.createColumns(h,c):g.createField(h,c,c.$index);var i=angular.element(f);d.append(i),a(function(){b(i)(c),c.$digest()})}}}]),angular.module("formalizer").directive("ngFormalizerAttach",function(a){return{link:function(b,c){b.$formalizer.attach(b,c,b.$eval("$field"),a)}}}),angular.module("formalizer").directive("ngBlacklist",function(){return{require:"ngModel",link:function(a,b,c,d){var e=a.$eval(c.ngBlacklist);"string"==typeof e&&(e=e.split(",")),d.$parsers.unshift(function(a){return d.$setValidity("blacklist",-1===e.indexOf(a)),a})}}}),angular.module("formalizer").directive("ngEqualTo",function(){return{require:"ngModel",link:function(a,b,c,d){function e(){var a=""===d.$modelValue?null:d.$modelValue||null,b=""===f?null:f||null;d.$setValidity("equal-to",b==a)}if(d){var f=null;a.$watch(c.ngModel,function(){e()}),a.$watch(c.ngEqualTo,function(a){f=a,e()})}}}}),function(){"use strict";function a(a){return a.replace(b,function(a,b,c,d){return d?c.toUpperCase():c}).replace(c,"Moz$1")}var b=/([\:\-\_]+(.))/g,c=/^moz([A-Z])/;angular.forEach({"only-alpha":/^[a-zA-Z]*$/i,"one-upper":/^(?=.*[A-Z]).+$/,"one-lower":/^(?=.*[a-z]).+$/,"one-number":/^(?=.*[0-9]).+$/,"one-alpha":/^(?=.*[a-z]).+$/i,"no-spaces":/^[^\s]+$/,hexadecimal:/^[0-9a-fA-F]+$/,"hex-color":/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/},function(b,c){angular.module("formalizer").directive(a("ng-"+c),function(){return{require:"ngModel",link:function(a,d,e,f){f.$parsers.unshift(function(a){var d=""+a;return void 0===a||null===a||0===d.length?(f.$setValidity(c,!0),a):(f.$setValidity(c,b.test(d)),d)})}}})})}(),angular.module("formalizer").constant("datepickerPopupFix",{datepickerPopup:"YYYY-MM-DD",datepickerTZ:void 0}).directive("ngDatepickerFix",["datepickerPopupFix",function(a){return{require:"?ngModel",priority:100,link:function(b,c,d,e){e.$parsers.unshift(function(b){var c;return c="string"==typeof b?moment(b,a.datepickerPopup):moment(b),c.isValid()?void 0!==a.datepickerTZ?new Date(c.toDate().toDateString()+" 00:00 GMT"+a.datepickerTZ):c.toDate():b})}}}]),angular.module("formalizer").directive("ngPopulate",function(){return{require:["^ngFormalizer","ngModel"],link:function(a,b,c,d){$ngFormalizer=d[0],$ngModel=d[1];var e=a.$eval(c.ngPopulate);$ngModel.$parsers.push(function(a){return e&&e[a]&&$ngFormalizer.setModel(e[a][0],e[a][1],e[a][2]||!1),a})}}}),angular.module("formalizer").directive("ngServerValidation",["$http",function(a){return{require:"ngModel",link:function(b,c,d,e){var f,g,h=d.ngServerValidation,i=d.ngRequestKey||"value",j=d.ngResponseKey||"value";jQuery(c).focusout(function(){if(g!=f){g=f;var b={};b[i]=f,a.post(h,b).success(function(a){e.$setValidity("server-validation-in-progress",!0),e.$setValidity("server-validation",!!a[j])}).error(function(){e.$setValidity("server-validation-in-progress",!0)})}}),e.$parsers.unshift(function(a){return a?(e.$setValidity("server-validation-in-progress",!1),f=a,a):void 0})}}}]),angular.module("formalizer").directive("ngDefault",["$timeout",function(a){return{require:"ngModel",link:function(b,c,d,e){function f(a){return"number"==typeof a&&""+a=="NaN"}var g=b.$eval(d.ngDefault),h=b.$eval(d.ngDefaultValues);if("number"===d.type&&(g=parseFloat(g,10)),h){if(!Array.isArray(h))throw new Error("ngDefaultValues must be an array of values");h.push(void 0)}else h=[void 0];a(function(){(f(e.$modelValue)||-1!==h.indexOf(e.$modelValue))&&b.$eval(d.ngModel+" = "+JSON.stringify(g))})}}}]),angular.module("formalizer").directive("ngHideGroups",function(){return{require:"ngModel",link:function(a,b,c){var d=a.$eval(c.ngHideGroups),e=Object.keys(d);a.$watch(c.ngModel,function(b,c){e.indexOf(""+c)>=0&&a.$formalizer.showGroups(d[c]),e.indexOf(""+b)>=0&&a.$formalizer.hideGroups(d[b])})}}}),angular.module("formalizer").directive("ngHideChildren",function(){return{require:"ngModel",link:function(a,b,c){var d,e=a.$eval(c.ngHideChildren),f=[];for(d in e)e[d]&&f.push(d);a.$watch(c.ngModel,function(b){a.$field.formalizer.visible_children=-1===f.indexOf(""+b)})}}}),angular.forEach("Selected,Checked,Disabled,Readonly,Required,Open".split(","),function(a){var b="ngOn"+a,c=a.toLowerCase();angular.module("formalizer").directive(b,function(){return{restrict:"A",priority:100,link:function(a,d,e){a.$watch(function(){return d.prop(c)},function(f){var g={$element:d};g["$"+c]=f,a.$eval(e[b],g)})}}})}),angular.module("formalizer").directive("ngCompile",["$compile","$timeout",function(a,b){return{link:function(c,d,e){e.$observe("ngBindHtml",function(){b(function(){a(d.contents())(c)})})}}}]),angular.module("formalizer").directive("ngLength",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b=parseInt(c.ngLength,10);return Array.isArray(a)||"string"==typeof a?d.$setValidity("length",a.length===b):d.$setValidity("length",!1),a})}}}),angular.module("formalizer").directive("ngDecimals",function(){return{require:"ngModel",link:function(a,b,c,d){var e=parseInt(c.ngDecimals,10)||4;d.$parsers.unshift(function(a){var b=parseFloat(a),c=""+b,f=0;if(!a||isNaN(b))return d.$setValidity("decimals",!0),a;-1!==c.indexOf(".")&&(f=c.split(".")[1].length);var g=e>=f;return d.$setValidity("decimals",g),g?a:null})}}}),angular.module("formalizer").directive("ngNoDecimals",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b=""+a,c=-1===b.indexOf(".");return d.$setValidity("no-decimals",c),c?a:null})}}}),angular.module("formalizer").directive("ngPastDate",function(){return{priority:-9e3,link:function(a,b,c){var d=new Date;d.setMilliseconds(0),d.setSeconds(0),d.setMinutes(0),d.setHours(0),d.setTime(d.getTime()-864e5),c.$set("maxDate",JSON.stringify(d))}}}),angular.module("formalizer").directive("ngFutureDate",function(){return{priority:-9e3,link:function(a,b,c){var d=new Date;d.setMilliseconds(0),d.setSeconds(0),d.setMinutes(0),d.setHours(0),d.setTime(d.getTime()+864e5),c.$set("maxDate",JSON.stringify(d))}}}),angular.module("formalizer").directive("ngTillToday",function(){return{priority:-9e3,link:function(a,b,c){var d=new Date;c.$set("maxDate",JSON.stringify(d))}}}),angular.module("formalizer").directive("ngUseLocale",["$locale","numberFilter","$log",function(a,b,c){return{require:"ngModel",priority:1e4,link:function(b,d,e,f){"number"==e.type?(f.$parsers.unshift(function(b){for(i=0;i<b.length;++i)b[i]==a.NUMBER_FORMATS.DECIMAL_SEP?b=b.substr(0,i)+"."+b.substr(i+1):b[i]==a.NUMBER_FORMATS.GROUP_SEP&&(b=b.substr(0,i)+b.substr(i+1));return b}),f.$formatters.unshift(function(b){if(!b)return b;for(b=""+b,i=0;i<b.length;++i)"."==b[i]&&(b=b.substr(0,i)+a.NUMBER_FORMATS.DECIMAL_SEP+b.substr(i+1));return b})):c.info("use locale not supportted for: ",e.type)}}}]),angular.module("formalizer").directive("ngHideEmit",function(){return{restrict:"A",multiElement:!0,link:function(a,b,c){a.$watch(c.ngHide,function(c){a.$emit("hide",[a.field,b,c])})}}}),angular.module("formalizer").directive("ngHideCatch",["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c){b.$on("hide",function(d,e){d.stopPropagation(),b.field.name==e[0].name&&a[e[2]?"addClass":"removeClass"](c,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}]);